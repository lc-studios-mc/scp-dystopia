{
	"format_version": "1.21.90",
	"minecraft:entity": {
		"description": {
			"identifier": "lc:scpdy_f_sentry_turret_broken",
			"is_spawnable": false,
			"is_summonable": true,
			"is_experimental": false,
			"properties": {
				"lc:played_death_anim": {
					"type": "bool",
					"default": false,
					"client_sync": true
				}
			}
		},

		"components": {
			"minecraft:is_hidden_when_invisible": {},
			"minecraft:health": {
				"value": 8,
				"max": 8
			},
			"minecraft:knockback_resistance": {
				"value": 1.0
			},
			"minecraft:type_family": {
				"family": [
					"inanimate",
					"broken"
				]
			},
			"minecraft:loot": {
				"table": "loot_tables/scpdy/entities/sentry_turret.json"
			},
			"minecraft:breathable": {
				"breathes_water": true,
				"generates_bubbles": false
			},
			"minecraft:fire_immune": {},
			"minecraft:damage_sensor": {
				"triggers": [
					{
						// Immune to fall damage
						"cause": "fall",
						"deals_damage": "no"
					}
				]
			},
			"minecraft:interact": {
				"interactions": [
					{
						"on_interact": {
							"filters": {
								"all_of": [
									{ "test": "is_family", "subject": "other", "value": "player" },
									{ "test": "has_equipment", "domain": "hand", "subject": "other", "value": "iron_ingot" }
								]
							},
							"event": "lc:back_to_normal",
							"target": "self"
						},
						"use_item": true,
						"play_sounds": "irongolem.repair",
						"interact_text": "action.interact.repair"
					}
				]
			},
			"minecraft:physics": {},
			"minecraft:collision_box": {
				"width": 0.7,
				"height": 1.42
			},
			"minecraft:is_collidable": {},
			"minecraft:nameable": {},
			"minecraft:leashable": {
				"presets": [
					{
						"soft_distance": 2,
						"hard_distance": 4,
						"max_distance": 69
					}
				]
			},
			"minecraft:leashable_to": {},
			"minecraft:persistent": {},
			"minecraft:body_rotation_blocked": {},
			"minecraft:conditional_bandwidth_optimization": {
				"default_values": {
					"max_optimized_distance": 40.0,
					"max_dropped_ticks": 15,
					"use_motion_prediction_hints": false
				}
			}
		},

		"component_groups": {
			"death_anim_completion_timer": {
				"minecraft:timer": {
					"looping": false,
					"randomInterval": false,
					"time": 1,
					"time_down_event": {
						"event": "lc:on_complete_death_anim",
						"target": "self"
					}
				}
			},

			"transform_back_to_normal": {
				"minecraft:transformation": {
					"into": "lc:scpdy_f_sentry_turret<lc:transformed_from_weakened>"
				}
			}
		},

		"events": {
			"minecraft:entity_spawned": {
				"add": { "component_groups": ["death_anim_completion_timer"] }
			},

			"minecraft:entity_transformed": {
				"add": { "component_groups": ["death_anim_completion_timer"] },
				"queue_command": {
					"command": ["particle minecraft:critical_hit_emitter ~ ~1.2 ~"]
				}
			},

			"lc:on_complete_death_anim": {
				"set_property": {
					"lc:played_death_anim": true
				}
			},

			"lc:back_to_normal": {
				"add": { "component_groups": ["transform_back_to_normal"] }
			}
		}
	}
}
